# 武器系统挂点在Maya和Unreal的同步 
为了保持武器系统的可扩展，角色动画和武器动画解耦，使用插槽（Socket）的方案，让武器骨骼系统和身体骨骼系统分离        
需要Unreal中的插槽坐标同步Maya武器的虚拟点的坐标信息   
json文件保存在工程路径下data文件夹下   
```
import maya.cmds as cmds
import json
import os

# 挂点名称
socket_name = "WeaponSocket_Locator"

# 获取本地变换
translate = cmds.getAttr(f"{socket_name}.translate")[0]
rotate = cmds.getAttr(f"{socket_name}.rotate")[0]

# 构建数据
socket_data = {
    "name": socket_name,
    "location": {"x": translate[0], "y": translate[1], "z": translate[2]},
    "rotation": {"x": rotate[0], "y": rotate[1], "z": rotate[2]},
}

# 获取 Maya 工程路径
project_path = cmds.workspace(q=True, rootDirectory=True)

# 设置导出路径 (工程路径下的 data 文件夹)
export_folder = os.path.join(project_path, "data")
if not os.path.exists(export_folder):
    os.makedirs(export_folder)  # 如果文件夹不存在，则创建

export_path = os.path.join(export_folder, "socket_data.json")

# 导出到 JSON
with open(export_path, "w") as f:
    json.dump(socket_data, f, indent=4)

print(f"Socket data exported successfully to {export_path}!")
```
只需要让武器的控制根节点或虚拟体命名为**WeaponSocket_Locator**  
定位好武器初始帧的位置，就可以开始动画制作  
示例结果： 
```
{
    "name": "WeaponSocket_Locator",
    "location": {
        "x": 34.87415616288925,
        "y": 97.2246691574479,
        "z": -7.911222900529021
    },
    "rotation": {
        "x": -22.946276037348976,
        "y": 3.8551410351372555,
        "z": -81.16297601679955
    }
}
```
软件UI显示的精度有裁剪。可以看到如果手动对位是不可能精确对上的   
