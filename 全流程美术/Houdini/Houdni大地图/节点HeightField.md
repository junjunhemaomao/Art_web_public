# Houdini 19.5 HeightField 节点详解

## 功能概述
- ​**核心作用**：生成初始高度场（`height`）和遮罩（`mask`）的 2D 体积数据，用于地形系统的基础构建。
- ​**输出内容**：
  - `height`：地形高度场（单位：米，可负值表示低于基准平面）。
  - `mask`：遮罩场（值域 `0~1`，控制其他地形节点的作用强度）。

---

## 参数详解

### 基础配置
| 参数               | 说明                                                                                     | 默认值/选项                        |
|--------------------|----------------------------------------------------------------------------------------|----------------------------------|
| ​**Orientation**​    | 定义高度场的 2D 平面与世界坐标系的对齐方式：<br>- `ZX`（默认，地面平面）<br>- `XY`/`YZ`（特殊场景使用）           | `ZX`                            |
| ​**Size**​           | 高度场的物理尺寸（单位：米），控制地形覆盖范围<br>（如 `Size = (200, 200)` 表示 200m x 200m 的地形平面）         | `(10, 10)`                      |
| ​**Center**​         | 高度场中心点的世界坐标位置，用于调整地形在场景中的位置                                             | `(0, 0, 0)`                     |

### 分辨率模式
| 参数                | 说明                                                                                     | 依赖模式          |
|---------------------|----------------------------------------------------------------------------------------|-----------------|
| ​**Division Mode**​   | 分辨率控制模式：<br>- `By Axis`：按最长轴划分固定采样数（由 ​**Grid Samples**​ 控制）<br>- `By Size`：按间距划分采样点（由 ​**Grid Spacing**​ 控制） | `By Axis`/`By Size` |
| ​**Grid Samples**​    | 当 `Division Mode = By Axis` 时，设置最长轴的采样点数（分辨率）<br>（如 `512` 表示生成 512x512 的网格）             | By Axis         |
| ​**Grid Spacing**​    | 当 `Division Mode = By Size` 时，设置采样点间距（单位：米）<br>（如 `0.5` 表示每个体素间距 0.5 米）                | By Size         |

### 初始值设置
| 参数                | 说明                                                                                     | 默认值          |
|---------------------|----------------------------------------------------------------------------------------|---------------|
| ​**Initial Height**​  | 高度场的初始值（单位：米）<br>- `0` 表示平坦地形<br>- 负值表示低于基准平面的凹陷区域                             | `0`           |
| ​**Initial Mask**​    | 遮罩场的初始值（值域 `0~1`）<br>- `0`：完全禁用其他节点的效果<br>- `1`：完全启用效果（需配合地形工具动态修改）             | `0`           |

### 其他参数
| 参数                | 说明                                                                                     | 示例值          |
|---------------------|----------------------------------------------------------------------------------------|---------------|
| ​**Uniform Scale**​   | 等比缩放高度场尺寸（不改变分辨率）<br>- 如 `2.0` 表示将地形尺寸放大 2 倍，体素密度保持不变                            | `1.0`         |
| ​**Sampling**​        | 定义体素中心对齐方式，影响 `HeightField Convert` 转换为多边形时的顶点位置（通常保持默认）                      | 默认对齐网格中心     |

---

## 使用注意事项
### 单位与坐标系
- ​**单位系统**：所有参数（`Size`/`Grid Spacing`/`Initial Height`）默认以**米**为单位，需与 Houdini 动力学系统一致。
- ​**坐标系对齐**：默认 `ZX` 平面为地面平面，若场景主视角为俯视 `XY` 平面，需调整 `Orientation`。

### 性能优化
- ​**分辨率选择**：
  - ​**By Axis 模式**：适合固定尺寸的高精度地形（如 `Grid Samples = 1024` 生成 1024x1024 的高度场）。
  - ​**By Size 模式**：适合动态调整地形密度（如 `Grid Spacing = 0.2` 生成每格 20cm 的密集采样）。
- ​**初始遮罩**：若无需全局遮罩控制，保持 `Initial Mask = 0` 并通过后续节点（如 `HeightField Mask`）局部绘制。

### 典型工作流
1. ​**创建基础地形**：设置 `Size` 和 `Division Mode` 定义地形范围和精度。
2. ​**调整初始高度**：若需预设山脉或凹陷，修改 `Initial Height` 并接入 `HeightField Noise`。
3. ​**连接地形工具**：将输出端接入 `HeightField Erode`（修改高度）或 `HeightField Mask`（修改遮罩）。
4. ​**转换多边形**：最终通过 `HeightField Convert` 生成可渲染的地形网格。

---

> 提示：高度场数据为 2D 体积，在视口中显示为平面网格，使用 ​**Visualization**​ 选项卡可调整高度缩放显示比例。