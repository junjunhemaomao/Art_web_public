import{_ as s,o as a,c as t,a6 as h}from"./chunks/framework.DZKVy2Mg.js";const n="/Art_web_public/assets/image-1.D8eoLvA_.png",l="/Art_web_public/assets/image-2.B71iphZ1.png",k="/Art_web_public/assets/image-5.B8grUVT6.png",p="/Art_web_public/assets/image-4.B9uyNZS-.png",e="/Art_web_public/assets/image-6.BERJWUex.png",r="/Art_web_public/assets/image-7.H1CrnwRV.png",D=JSON.parse('{"title":"制作及修改字体","description":"","frontmatter":{"readingTime":"6 min read"},"headers":[],"relativePath":"技术美术/制作及修改字体/制作及修改字体.md","filePath":"技术美术/制作及修改字体/制作及修改字体.md"}'),d={name:"技术美术/制作及修改字体/制作及修改字体.md"};function g(y,i,F,C,o,c){return a(),t("div",null,[...i[0]||(i[0]=[h('<h1 id="制作及修改字体" tabindex="-1">制作及修改字体 <a class="header-anchor" href="#制作及修改字体" aria-label="Permalink to &quot;制作及修改字体&quot;">​</a></h1><p>一些坑爹的情况下，需要对老项目字体进行修改，既要保持一定的熟悉度又要避免字体所有者的钓鱼敲诈。使用FontForge对字体进行修改。</p><h4 id="fontforge软件下载" tabindex="-1"><a href="https://fontforge.org/en-US/downloads/windows-dl/" target="_blank" rel="noreferrer">FontForge软件下载</a> <a class="header-anchor" href="#fontforge软件下载" aria-label="Permalink to &quot;[FontForge软件下载](https://fontforge.org/en-US/downloads/windows-dl/)&quot;">​</a></h4><p><img src="https://fontforge.org/assets/img/hero.png" alt=""></p><hr><h2 id="准备字体文件" tabindex="-1">准备字体文件 <a class="header-anchor" href="#准备字体文件" aria-label="Permalink to &quot;准备字体文件&quot;">​</a></h2><p>原理：将自己准备的像素图片处理成svg矢量格式，采用掺沙子的办法，替换高频词，随机再改几个字符，加大被检测出的难度。</p><h4 id="符合编码规则" tabindex="-1">符合编码规则 <a class="header-anchor" href="#符合编码规则" aria-label="Permalink to &quot;符合编码规则&quot;">​</a></h4><p>另存为nuicode编码序列的图片，编码是用10进制表示，字母 &quot;A&quot; 在 Unicode 编码中的十进制值是 65<br><img src="'+n+`" alt="alt text"></p><h4 id="高频原则" tabindex="-1">高频原则 <a class="header-anchor" href="#高频原则" aria-label="Permalink to &quot;高频原则&quot;">​</a></h4><p>替换高频出现的字符，比如10个数字和26个字母（包含大小写）</p><ul><li>数字编码字段： 48——57（0——9）</li><li>大写字母编码字段： 65——90（A——Z）</li><li>小写字母编码字段： 97——122（a——z）</li></ul><h3 id="生成新的字符" tabindex="-1">生成新的字符 <a class="header-anchor" href="#生成新的字符" aria-label="Permalink to &quot;生成新的字符&quot;">​</a></h3><p>原理：原则上不要自己做这种低价值的活，找现成字体文件掺沙子，先准备好若干替换的字符。</p><blockquote><p>图片尺寸：1000*1000</p></blockquote><h4 id="生成字符代码" tabindex="-1">生成字符代码： <a class="header-anchor" href="#生成字符代码" aria-label="Permalink to &quot;生成字符代码：&quot;">​</a></h4><p>添加了char_proportion参数单独控制字符在图片中的占比。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes catppuccin-latte catppuccin-mocha vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">from</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> PIL </span><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">import</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> Image</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> ImageFont</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> ImageDraw</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">import</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> os</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">def</span><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#89B4FA;--shiki-dark-font-style:italic;"> generate_char_images</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;">font_path</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> output_dir</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> img_size</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;">1000</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> char_proportion</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;">0.8</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">):</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">    # 确保输出目录存在</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">    os</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">makedirs</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">output_dir</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> exist_ok</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">True</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">    # 处理数字、大小写字母的编码范围</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">    for</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> codepoint </span><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">in</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;"> list</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">range</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;">48</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 58</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">))</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> +</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;"> list</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">range</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;">65</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 91</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">))</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> +</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;"> list</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">range</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;">97</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 123</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)):</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 将Unicode编码转换为字符</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        char </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;"> chr</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">codepoint</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 计算初始字体大小</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        font_size </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;"> int</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">img_size </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">*</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> char_proportion</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        font </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> ImageFont</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">truetype</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">font_path</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> size</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">font_size</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 获取字体的 ascent 和 descent</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        ascent</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> descent </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> font</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">getmetrics</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 创建一个新的白色背景的图像</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        image </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> Image</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">new</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">&quot;RGB&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">img_size</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> img_size</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">),</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> &quot;white&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        draw </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> ImageDraw</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">Draw</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">image</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 获取字符的边界框，返回值为(x_min, y_min, x_max, y_max)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        bbox </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> draw</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">textbbox</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">((</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">),</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> char</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> font</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">font</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        text_width </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> bbox</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">[</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">]</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> -</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> bbox</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">[</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">]</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        text_height </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> bbox</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">[</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">3</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">]</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> -</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> bbox</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">[</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">1</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 计算字符的总高度，包括 ascent 和 descent</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        total_height </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> ascent </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">+</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> descent</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 计算字符绘制的左上角位置，使字符基准线对齐并垂直居中</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        x_position </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">img_size </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">-</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> text_width</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> //</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 2</span><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">  # 水平方向居中</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        y_position </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">img_size </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">-</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> total_height</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> //</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 2</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> +</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> ascent  </span><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;"># 基于 ascent 和 descent 的垂直居中</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 绘制字符到图像中</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        draw</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">text</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">((</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">x_position</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> y_position </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">-</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> ascent</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">),</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> char</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> font</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">font</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> fill</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">&quot;black&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 将图像保存到指定目录，文件名为Unicode十进制编码</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        filename </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> os</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">path</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">join</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">output_dir</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#40A02B;--shiki-light-font-style:italic;--shiki-dark:#A6E3A1;--shiki-dark-font-style:italic;"> f</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">&quot;</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">{</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">codepoint</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">}</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">.png&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        image</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">save</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">filename</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">        print</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#40A02B;--shiki-light-font-style:italic;--shiki-dark:#A6E3A1;--shiki-dark-font-style:italic;">f</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">&quot;Saved </span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">{</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">char</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">}</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> as </span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">{</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">filename</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">}</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">font_path </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#40A02B;--shiki-light-font-style:italic;--shiki-dark:#A6E3A1;--shiki-dark-font-style:italic;"> r</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">&quot;</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">D:</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">\\f</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">ont_images</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">\\n</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">asalization-free.rg-regular.otf</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">&quot;</span><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">  # 替换为你的字体文件路径</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">output_dir </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#40A02B;--shiki-light-font-style:italic;--shiki-dark:#A6E3A1;--shiki-dark-font-style:italic;"> r</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">&quot;</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">D:</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">\\f</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">ont_images\\svg_output</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">&quot;</span><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">  # 输出图像保存的目录</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">generate_char_images</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">font_path</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> output_dir</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span></code></pre></div><h4 id="生成结果" tabindex="-1">生成结果 <a class="header-anchor" href="#生成结果" aria-label="Permalink to &quot;生成结果&quot;">​</a></h4><p><img src="`+l+`" alt="alt text"></p><h4 id="筛选替换" tabindex="-1">筛选替换 <a class="header-anchor" href="#筛选替换" aria-label="Permalink to &quot;筛选替换&quot;">​</a></h4><ol><li>有偷感的选择出要替换的字符，删掉不用的。</li><li>运行FontForge，打开要修改的字体文件，运行自动化脚本。</li></ol><h3 id="fontforge脚本批处理导入" tabindex="-1">FontForge脚本批处理导入 <a class="header-anchor" href="#fontforge脚本批处理导入" aria-label="Permalink to &quot;FontForge脚本批处理导入&quot;">​</a></h3><blockquote><p>如果人力手工替换，很繁琐低效，且容易出错。FontForge内有API支持定制开发。</p></blockquote><p>一些坑： 导入新的字符图片前需要清除原始字符的相关信息，并初始化相应的字符位置。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes catppuccin-latte catppuccin-mocha vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">import</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> fontforge</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">import</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> os</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">import</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> psMat</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;"># 获取当前打开的字体</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">font </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> fontforge</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">activeFont</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;"># 检查是否有打开的字体</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">if</span><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;"> not</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> font</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">:</span></span>
<span class="line"><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">    print</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">&quot;No font is open. Please open a font file first.&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">    exit</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;"># 图片文件目录</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">image_dir </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#40A02B;--shiki-light-font-style:italic;--shiki-dark:#A6E3A1;--shiki-dark-font-style:italic;"> r</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">&quot;</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">D:</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">\\f</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">ont_images\\svg_output</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;"># 固定边距值</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">fixed_bearing </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 5</span><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">  # 左右边距设置为相同的值</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;"># 遍历目录中的所有 PNG 文件</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">for</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> filename </span><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">in</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> os</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">listdir</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">image_dir</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">):</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">    if</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> filename</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">endswith</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">&quot;.png&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">):</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 提取文件名中的 Unicode 编码（十进制）</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        unicode_value </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;"> int</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">os</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">path</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">splitext</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">filename</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)[</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 将 Unicode 编码转换为字符</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        glyph </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;"> chr</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">unicode_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 检查字体中是否已经有此字符，如果没有则创建</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">        if</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> unicode_value </span><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">not</span><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;"> in</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> font</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">:</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">            glyph_obj </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> font</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">createChar</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">unicode_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">        else</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">:</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">            glyph_obj </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> font</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">[</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;">unicode_value</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 完全清除现有的字符信息</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        glyph_obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">clear</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">()</span><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">  # 删除现有矢量图</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        glyph_obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">unlinkRef</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">()</span><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">  # 移除引用的任何组件</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        glyph_obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">transform</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">psMat</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">identity</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">())</span><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">  # 重置变换信息</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        glyph_obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">width </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 1000</span><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">  # 重置字符宽度</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        glyph_obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">left_side_bearing </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> fixed_bearing  </span><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;"># 重置左边距</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        glyph_obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">right_side_bearing </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> fixed_bearing  </span><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;"># 重置右边距</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 导入对应的 PNG 文件</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        image_path </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> os</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">path</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">join</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">image_dir</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> filename</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        glyph_obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">importOutlines</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">image_path</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 执行 autotrace</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        glyph_obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">autoTrace</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 计算轮廓边界框，并居中对齐</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        bbox </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> glyph_obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">boundingBox</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">()</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        glyph_width </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> bbox</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">[</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">2</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">]</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> -</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> bbox</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">[</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">]</span><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">  # 计算轮廓宽度</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        x_offset </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;"> (</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">glyph_obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">width </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">-</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> glyph_width</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> /</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 2</span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;"> -</span><span style="--shiki-light:#E64553;--shiki-light-font-style:italic;--shiki-dark:#EBA0AC;--shiki-dark-font-style:italic;"> bbox</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">[</span><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 将轮廓居中</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        glyph_obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">transform</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">psMat</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#1E66F5;--shiki-dark:#89B4FA;">translate</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">x_offset</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">,</span><span style="--shiki-light:#FE640B;--shiki-dark:#FAB387;"> 0</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;">        # 再次设置左右边距（以防居中操作影响）</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        glyph_obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">left_side_bearing </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> fixed_bearing</span></span>
<span class="line"><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">        glyph_obj</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">.</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">right_side_bearing </span><span style="--shiki-light:#179299;--shiki-dark:#94E2D5;">=</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;"> fixed_bearing</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#FE640B;--shiki-light-font-style:italic;--shiki-dark:#FAB387;--shiki-dark-font-style:italic;">        print</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">(</span><span style="--shiki-light:#40A02B;--shiki-light-font-style:italic;--shiki-dark:#A6E3A1;--shiki-dark-font-style:italic;">f</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">&quot;Processed </span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">{</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">filename</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">}</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> (U+</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">{</span><span style="--shiki-light:#4C4F69;--shiki-dark:#CDD6F4;">unicode_value</span><span style="--shiki-light:#8839EF;--shiki-dark:#CBA6F7;">:04X</span><span style="--shiki-light:#EA76CB;--shiki-dark:#F5C2E7;">}</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;">): Cleared, imported, auto-traced, and centered&quot;</span><span style="--shiki-light:#7C7F93;--shiki-dark:#9399B2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;"># 如果需要保存当前字体文件，使用以下代码</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;"># font.save(r&quot;D:\\font_images\\output_font.sfd&quot;)  # 保存为 FontForge 的 SFD 文件</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;"># font.generate(r&quot;D:\\font_images\\output_font.ttf&quot;)  # 生成 TTF 文件</span></span></code></pre></div><h4 id="替换结果" tabindex="-1">替换结果 <a class="header-anchor" href="#替换结果" aria-label="Permalink to &quot;替换结果&quot;">​</a></h4><p>原始字体<br><img src="`+k+'" alt="alt text"><br> 可以看到字母和数字都被替换了。<br><img src="'+p+'" alt="alt text"></p><h4 id="修改字体名或版权信息" tabindex="-1">修改字体名或版权信息 <a class="header-anchor" href="#修改字体名或版权信息" aria-label="Permalink to &quot;修改字体名或版权信息&quot;">​</a></h4><p>Element—— Font Information<br><img src="'+e+'" alt="alt text"><br> 这里是字体文件可以被识别的命名。Copyright是版权信息。 <strong>版权费清朝已交过，放心用。</strong></p><h4 id="生成字体" tabindex="-1">生成字体 <a class="header-anchor" href="#生成字体" aria-label="Permalink to &quot;生成字体&quot;">​</a></h4><p><img src="'+r+'" alt="alt text"></p><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>大概率原作者就很难辨别版权问题了。遇到了问题再和他斗智斗勇。</p>',34)])])}const f=s(d,[["render",g]]);export{D as __pageData,f as default};
