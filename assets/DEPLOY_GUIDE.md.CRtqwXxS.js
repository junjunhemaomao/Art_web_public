import{_ as a,o as t,c as s,ag as e}from"./chunks/framework.Bx1bucHt.js";const g=JSON.parse('{"title":"CodeFather 网站部署与更新指南","description":"","frontmatter":{},"headers":[],"relativePath":"DEPLOY_GUIDE.md","filePath":"DEPLOY_GUIDE.md"}'),l={name:"DEPLOY_GUIDE.md"};function o(n,i,r,d,c,h){return t(),s("div",null,[...i[0]||(i[0]=[e(`<h1 id="codefather-网站部署与更新指南" tabindex="-1">CodeFather 网站部署与更新指南 <a class="header-anchor" href="#codefather-网站部署与更新指南" aria-label="Permalink to &quot;CodeFather 网站部署与更新指南&quot;">​</a></h1><h2 id="_1-架构说明" tabindex="-1">1. 架构说明 <a class="header-anchor" href="#_1-架构说明" aria-label="Permalink to &quot;1. 架构说明&quot;">​</a></h2><ul><li><strong>私有仓库 (Source)</strong>: <code>Art_web</code><ul><li>存放所有 Markdown 源码、图片素材、构建配置。</li><li><strong>不要</strong>手动上传 <code>dist</code> 目录。</li></ul></li><li><strong>公开仓库 (Target)</strong>: <code>Art_web_public</code><ul><li>只存放构建好的静态网页文件（HTML/CSS/JS）。</li><li>由 GitHub Actions 自动推送，<strong>不要</strong>手动修改此仓库。</li></ul></li><li><strong>访问地址</strong>: <a href="https://junjunhemaomao.github.io/Art_web_public/" target="_blank" rel="noreferrer">https://junjunhemaomao.github.io/Art_web_public/</a></li></ul><hr><h2 id="_2-日常更新流程-只需-3-步" tabindex="-1">2. 日常更新流程 (只需 3 步) <a class="header-anchor" href="#_2-日常更新流程-只需-3-步" aria-label="Permalink to &quot;2. 日常更新流程 (只需 3 步)&quot;">​</a></h2><p>你所有的操作都只在 <strong>私有仓库 (Art_web)</strong> 进行：</p><h3 id="第一步-编写内容" tabindex="-1">第一步：编写内容 <a class="header-anchor" href="#第一步-编写内容" aria-label="Permalink to &quot;第一步：编写内容&quot;">​</a></h3><p>在本地编辑 Markdown 文件，添加图片等。</p><h3 id="第二步-本地预览-可选但推荐" tabindex="-1">第二步：本地预览 (可选但推荐) <a class="header-anchor" href="#第二步-本地预览-可选但推荐" aria-label="Permalink to &quot;第二步：本地预览 (可选但推荐)&quot;">​</a></h3><p>在终端运行：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes catppuccin-latte catppuccin-mocha vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#89B4FA;--shiki-dark-font-style:italic;">npm</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> run</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> docs:dev</span></span>
<span class="line"><span style="--shiki-light:#9CA0B0;--shiki-light-font-style:italic;--shiki-dark:#6C7086;--shiki-dark-font-style:italic;"># 或者</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#89B4FA;--shiki-dark-font-style:italic;">npm</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> run</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> docs:preview</span></span></code></pre></div><p>打开浏览器 <code>http://localhost:5173</code> 确认效果无误。</p><h3 id="第三步-提交推送" tabindex="-1">第三步：提交推送 <a class="header-anchor" href="#第三步-提交推送" aria-label="Permalink to &quot;第三步：提交推送&quot;">​</a></h3><p>在终端运行：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes catppuccin-latte catppuccin-mocha vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#89B4FA;--shiki-dark-font-style:italic;">git</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> add</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> .</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#89B4FA;--shiki-dark-font-style:italic;">git</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> commit</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> -m</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> &quot;更新了xxx文章&quot;</span></span>
<span class="line"><span style="--shiki-light:#1E66F5;--shiki-light-font-style:italic;--shiki-dark:#89B4FA;--shiki-dark-font-style:italic;">git</span><span style="--shiki-light:#40A02B;--shiki-dark:#A6E3A1;"> push</span></span></code></pre></div><p><strong>这就完成了！</strong> 剩下的交给自动化程序。</p><hr><h2 id="_3-自动化流程-幕后发生的事" tabindex="-1">3. 自动化流程 (幕后发生的事) <a class="header-anchor" href="#_3-自动化流程-幕后发生的事" aria-label="Permalink to &quot;3. 自动化流程 (幕后发生的事)&quot;">​</a></h2><ol><li>你 <code>git push</code> 后，GitHub Actions 会在私有仓库触发 <code>Deploy to Public Repository</code> 任务。</li><li>任务会自动执行 <code>npm run docs:build</code> 生成网页。</li><li>任务会自动将生成的网页推送到 <strong>公开仓库</strong> 的 <code>main</code> 分支。</li><li>GitHub Pages 监测到公开仓库更新，自动刷新网站（通常延迟 1-3 分钟）。</li></ol><hr><h2 id="_4-故障排查" tabindex="-1">4. 故障排查 <a class="header-anchor" href="#_4-故障排查" aria-label="Permalink to &quot;4. 故障排查&quot;">​</a></h2><p>如果推送后网站没更新：</p><ol><li><strong>检查 Action 权限 (常见)</strong>: <ul><li>进入私有仓库 <code>Settings</code> -&gt; <code>Actions</code> -&gt; <code>General</code>。</li><li>滚动到底部 <strong>Workflow permissions</strong>。</li><li>必须勾选 <strong>Read and write permissions</strong> 并保存。</li></ul></li><li><strong>检查 Action 状态</strong>: <ul><li>进入私有仓库 <code>Art_web</code> -&gt; 点击顶部 <code>Actions</code>。</li><li>看最近一次运行是 ✅ (绿色成功) 还是 ❌ (红色失败)。</li></ul></li><li><strong>检查 Pages 状态</strong>: <ul><li>进入公开仓库 <code>Art_web_public</code> -&gt; <code>Settings</code> -&gt; <code>Pages</code>。</li><li>确认 Build and deployment Source 选的是 <code>Deploy from a branch</code> (main / root)。</li></ul></li></ol><h2 id="_5-内容私有化管理" tabindex="-1">5. 内容私有化管理 <a class="header-anchor" href="#_5-内容私有化管理" aria-label="Permalink to &quot;5. 内容私有化管理&quot;">​</a></h2><p>如果你希望某些文章或文件夹<strong>只在本地/私有仓库可见，不发布到公开网站</strong>，可以使用以下两种方法：</p><h3 id="方法一-专用私有目录-推荐" tabindex="-1">方法一：专用私有目录（推荐） <a class="header-anchor" href="#方法一-专用私有目录-推荐" aria-label="Permalink to &quot;方法一：专用私有目录（推荐）&quot;">​</a></h3><p>将文件放入名为 <code>private</code> 或 <code>drafts</code> 的文件夹中（支持任意层级）。</p><ul><li><strong>示例</strong>： <ul><li><code>全流程美术/private/未公开设计图.md</code></li><li><code>drafts/草稿.md</code></li></ul></li><li><strong>效果</strong>：这些目录及其内容在构建时会被<strong>完全忽略</strong>，就像不存在一样。</li></ul><h3 id="方法二-加下划线前缀-灵活控制" tabindex="-1">方法二：加下划线前缀 <code>_</code>（灵活控制） <a class="header-anchor" href="#方法二-加下划线前缀-灵活控制" aria-label="Permalink to &quot;方法二：加下划线前缀 \`_\`（灵活控制）&quot;">​</a></h3><p>在<strong>文件名</strong>或<strong>文件夹名</strong>前加上下划线 <code>_</code>。</p><ul><li><strong>示例</strong>： <ul><li><code>_我的日记.md</code></li><li><code>_秘密项目/</code></li></ul></li><li><strong>效果</strong>： <ul><li>文件不会被构建生成 HTML。</li><li><strong>智能隐藏链接</strong>：如果在 README 或其他页面引用了这些私有文件，<strong>线上部署时，整行链接（包括列表项）会自动消失</strong>。</li><li><strong>本地预览可见</strong>：本地开发时依然可见可点击，方便查看。</li></ul></li></ul><hr><h2 id="_6-关键配置备忘-不要轻易改动" tabindex="-1">6. 关键配置备忘 (不要轻易改动) <a class="header-anchor" href="#_6-关键配置备忘-不要轻易改动" aria-label="Permalink to &quot;6. 关键配置备忘 (不要轻易改动)&quot;">​</a></h2><ul><li><strong>Deploy Key</strong>: 私钥在私有库 Secrets (<code>DEPLOY_KEY</code>)，公钥在公开库 Deploy keys。</li><li><strong>Base URL</strong>: <code>.vitepress/config.mts</code> 中的 <code>base: &#39;/Art_web_public/&#39;</code> 必须与公开仓库名一致。</li><li><strong>Workflow</strong>: <code>.github/workflows/deploy.yml</code> 定义了自动部署逻辑。</li></ul>`,34)])])}const k=a(l,[["render",o]]);export{g as __pageData,k as default};
